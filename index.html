<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Roset Productions – Exploded → Assembled</title>
  <style>
    :root{ --brand:#16a34a; --ink:#0f172a; --muted:#cbd5e1; }
    *{box-sizing:border-box} html,body{margin:0}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--ink);}

    /* Mindre header */
    header{position:sticky;top:0;z-index:10;background:#ffffffcc;backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid #e5e7eb}
    header .wrap{width:min(1100px,92vw);margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:8px 0}
    .btn{display:inline-flex;align-items:center;gap:.5rem;padding:10px 14px;border-radius:12px;background:var(--brand);color:#08121a;font-weight:800;text-decoration:none;box-shadow:0 10px 30px -12px #22c55e}

    /* Mindre hero, video i ramme */
    .hero{position:relative;min-height:80vh;display:grid;place-items:center;overflow:clip;background:#0b0f1a}
    .frame{position:relative;width:min(1200px,92vw);height:min(70vh,720px);border-radius:16px;overflow:hidden;box-shadow:0 20px 60px -30px rgba(0,0,0,.6);border:1px solid #0f172a}
    .frame video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;z-index:0;filter:saturate(1.05)}
    .scrim{position:absolute;inset:0;z-index:1;background:radial-gradient(70% 55% at 50% 35%, transparent, rgba(0,0,0,.45))}

    .copy{position:absolute;inset:0;z-index:2;display:grid;place-items:center;text-align:center;color:#f8fafc;padding:clamp(12px,3vw,32px)}
    .eyebrow{display:inline-block;margin-bottom:12px;padding:6px 12px;border:1px solid #22c55e66;border-radius:999px;color:var(--muted);backdrop-filter:blur(2px)}
    h1{margin:0 0 10px;font-size:clamp(28px,5.5vw,56px);line-height:1.02}
    .lead{margin:0 0 16px;color:#cbd5e1;font-size:clamp(16px,2.5vw,20px)}
    .cta{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
    .cta .btn.secondary{background:#111827;color:#e5e7eb;box-shadow:0 10px 30px -12px rgba(31,41,55,.75)}

    section{padding:56px 0}
    .container{width:min(1100px,92vw);margin:0 auto;color:#334155}

    @media (prefers-reduced-motion: reduce){
      .hero{min-height:60vh}
      .frame{height:min(50vh,560px)}
      .frame video{display:none}
      .scrim{background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.6))}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div style="font-weight:800;letter-spacing:.2px">ROSET PRODUCTIONS</div>
      <nav style="display:flex;gap:8px;align-items:center">
        <a href="#tjenester" style="padding:8px 10px;border-radius:10px;text-decoration:none;color:var(--ink)">Tjenester</a>
        <a href="#kontakt" class="btn">Kontakt</a>
      </nav>
    </div>
  </header>

  <div class="hero" id="hero">
    <div class="frame">
      <video id="heroVid" preload="auto" playsinline muted poster="./media/poster.jpg">
        <!-- BYTT denne til ditt faktiske filnamn om det er anna -->
        <source src="./media/exploded.mp4" type="video/mp4">
      </video>
      <div class="scrim" aria-hidden="true"></div>

      <div class="copy">
        <div>
          <span class="eyebrow">Tenk. Design. Produser.</span>
          <h1>Frå eksplodert → saman</h1>
          <p class="lead">Scroll ned for å setje modellen saman. Scroll opp for å eksplodere igjen.</p>
          <div class="cta">
            <a href="#tjenester" class="btn">Sjå tenester</a>
            <a href="#kontakt" class="btn secondary">Kontakt oss</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <section id="tjenester">
    <div class="container">
      <h2>Tjenester</h2>
      <p>Bytt denne demoen med reelt innhald etter behov.</p>
    </div>
  </section>

  <section id="kontakt">
    <div class="container">
      <h2>Kontakt</h2>
      <p>Lenk til Apps Script-skjemaet ditt, eller embed skjemaet (utan Google Sites-begrensingar).</p>
    </div>
  </section>

  <script>
    // ✨ S-M-O-O-T-H scrubbing:
    // – Køyre ein lett RAF-loop berre medan hero er i view (IntersectionObserver)
    // – Bruke fastSeek() om tilgjengeleg for raskare hopping i video
    (function(){
      const hero = document.getElementById('hero');
      const vid  = document.getElementById('heroVid');

      let dur = 0, ready = false;
      let active = false;     // er hero synleg? (start/stop loop)
      let running = false;    // er RAF-loopen i gang?

      function readMeta(){
        if (!isFinite(vid.duration) || vid.duration === 0) return;
        dur = vid.duration; ready = true;
        vid.pause(); vid.currentTime = 0; // start på første frame
      }
      vid.addEventListener('loadedmetadata', readMeta);
      vid.addEventListener('durationchange', readMeta);

      function progress(){
        const rect = hero.getBoundingClientRect();
        const winH = window.innerHeight || document.documentElement.clientHeight;
        // 0 når toppen av hero er øvst, 1 når bunnen har passert nedre kant
        const p = Math.min(Math.max((winH - rect.top) / (rect.height + winH), 0), 1);
        return p;
      }

      function setTimeByScroll(){
        if(!ready) return;
        const p = progress();           // 0 → 1
        const t = p * dur;              // tid i video
        // Raskare søk der det er støtta
        if (typeof vid.fastSeek === 'function') { try { vid.fastSeek(t); return; } catch(e){} }
        try { vid.currentTime = t; } catch(e) {}
      }

      function loop(){                  // kontinuerleg oppdatering medan hero er synleg
        if (!active) { running = false; return; }
        setTimeByScroll();
        requestAnimationFrame(loop);
      }

      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          active = e.isIntersecting;
          if (active && !running){
            running = true;
            requestAnimationFrame(loop);  // start jamn oppdatering
          }
        });
      }, {root:null, threshold:0});
      io.observe(hero);

      // Oppdatering ved resize (endrar mapping)
      addEventListener('resize', ()=>{ if(active) setTimeByScroll(); }, {passive:true});
      // For ekstra respons på touch/wheel (ikkje nødvendig, men gir kjensla av “live”)
      addEventListener('scroll', ()=>{ if(active && !running){ setTimeByScroll(); } }, {passive:true});
      addEventListener('wheel',  ()=>{ if(active) setTimeByScroll(); }, {passive:true});
      addEventListener('touchmove', ()=>{ if(active) setTimeByScroll(); }, {passive:true});
    })();
  </script>
</body>
</html>
