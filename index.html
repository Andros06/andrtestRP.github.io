<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Roset Productions – Exploded → Assembled</title>
  <style>
    :root{ --brand:#16a34a; --ink:#0f172a; --muted:#cbd5e1; }
    *{box-sizing:border-box} html,body{margin:0}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);scroll-behavior:smooth}

    header{position:sticky;top:0;z-index:10;background:#ffffffcc;backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid #e5e7eb}
    header .wrap{width:min(1100px,92vw);margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:8px 0}
    .btn{display:inline-flex;align-items:center;gap:.5rem;padding:10px 14px;border-radius:12px;background:var(--brand);color:#08121a;font-weight:800;text-decoration:none;box-shadow:0 10px 30px -12px #22c55e}

    /* HERO fullskjerm bakgrunnsvideo */
    .hero{
      position:relative;
      min-height:100vh;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#fff;
      text-align:center;
      background:#000;
    }
    .hero video{
      position:absolute;
      top:0;left:0;width:100%;height:100%;
      object-fit:cover;
      z-index:0;
      filter:saturate(1.05);
    }
    .scrim{
      position:absolute;inset:0;z-index:1;
      background:radial-gradient(70% 55% at 50% 35%, transparent, rgba(0,0,0,.45));
    }
    .hero .content{
      position:relative;z-index:2;padding:clamp(16px,5vw,40px);
    }
    .eyebrow{
      display:inline-block;margin-bottom:12px;
      padding:6px 12px;border:1px solid #22c55e66;border-radius:999px;
      color:var(--muted);backdrop-filter:blur(2px);
    }
    h1{margin:0 0 10px;font-size:clamp(32px,6vw,64px);line-height:1.05}
    .lead{margin:0 0 16px;color:#cbd5e1;font-size:clamp(16px,2.5vw,20px)}
    .cta{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
    .cta .btn.secondary{background:#111827;color:#e5e7eb;box-shadow:0 10px 30px -12px rgba(31,41,55,.75)}

    section{padding:56px 0;background:#fff;}
    .container{width:min(1100px,92vw);margin:0 auto;color:#334155}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div style="font-weight:800;letter-spacing:.2px">ROSET PRODUCTIONS</div>
      <nav style="display:flex;gap:8px;align-items:center">
        <a href="#tjenester" style="padding:8px 10px;border-radius:10px;text-decoration:none;color:var(--ink)">Tjenester</a>
        <a href="#kontakt" class="btn">Kontakt</a>
      </nav>
    </div>
  </header>

  <div class="hero" id="hero">
    <video id="heroVid" preload="none" playsinline muted poster="./media/poster.jpg">
      <source id="vidMp4"  src="" type="video/mp4">
    </video>
    <div class="scrim" aria-hidden="true"></div>
    <div class="content">
      <span class="eyebrow">Tenk. Design. Produser.</span>
      <h1>Frå eksplodert → saman</h1>
      <p class="lead">Scroll ned for å setje modellen saman. Scroll opp for å eksplodere igjen.</p>
      <div class="cta">
        <a href="#tjenester" class="btn">Sjå tenester</a>
        <a href="#kontakt" class="btn secondary">Kontakt oss</a>
      </div>
    </div>
  </div>

  <section id="tjenester">
    <div class="container">
      <h2>Tjenester</h2>
      <p>Bytt denne demoen med reelt innhald etter behov.</p>
    </div>
  </section>

  <section id="kontakt">
    <div class="container">
      <h2>Kontakt</h2>
      <p>Lenk til Apps Script-skjemaet ditt, eller embed skjemaet.</p>
    </div>
  </section>

  <script>
    (function(){
      const hero = document.getElementById('hero');
      const vid  = document.getElementById('heroVid');
      let dur = 0, ready = false, active = false, running = false;
      const SPEED = 2.5; // juster for raskare animasjon

      // Lazy-load video først etter at resten er lasta
      window.addEventListener("load", () => {
        document.getElementById("vidMp4").src  = "./media/exploded.comp.mp4";
        vid.load();
      });

      function initVideo(){
        if (vid.readyState >= 1) {
          dur = vid.duration || 0;
          ready = true;
          vid.pause();
          vid.currentTime = 0;
        }
      }
      vid.addEventListener('loadedmetadata', initVideo);
      vid.addEventListener('loadeddata', initVideo);
      vid.addEventListener('durationchange', initVideo);

      function progress(){
        const rect = hero.getBoundingClientRect();
        const winH = window.innerHeight;
        let p = (winH - rect.top) / (rect.height * 0.6 + winH);
        return Math.min(Math.max(p,0),1);
      }

      function setTimeByScroll(){
        if(!ready || dur===0) return;
        const p = progress();
        const t = Math.min(p * dur * SPEED, dur);
        vid.currentTime = t;
      }

      function loop(){
        if (!active){ running=false; return; }
        setTimeByScroll();
        requestAnimationFrame(loop);
      }

      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          active = e.isIntersecting;
          if (active && !running){
            running = true;
            requestAnimationFrame(loop);
          }
        });
      });
      io.observe(hero);

      window.addEventListener('scroll', ()=>{ if(active) setTimeByScroll(); }, {passive:true});
      window.addEventListener('resize', ()=>{ if(active) setTimeByScroll(); }, {passive:true});
    })();
  </script>
</body>
</html>
